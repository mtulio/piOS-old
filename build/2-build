#!/bin/bash
#
# 2-build - Build packages from this repo,  options chosen at step 1-configure 
#
# author: Marco Tulio R Braga (https://github.com/mtulio/piOS)
# created: 04 Aug 2015
# modified: 04 Aug 2015
#
#######################################

#######################################
# Show usage script
# Globals:
#   None
# Arguments:
#   None
# Returns:
#   Help message
#######################################
usage() {
  #echo "Help Function $0 : $*"
  [ "$*" ] && echo " You entered        : $0 $*"
  #sed -n '/^##/,/^$/s/^## \{0,1\}//p' "$0"
  echo " Usage          : $0 "
  exit 2
} 2>/dev/null


#######################################
# Declare Globals
#TODO(mtulio) : check .build.cfg config file to check what envs to export, packs to build...
[ ! -f .build.cfg ] && (echo "# Config file not found in $(basename $0). Run 2-configure to fix it."; exit 2)
readonly TOOL_PATH="$(cat .build.cfg |grep ^'TOOL_PATH=' |awk -F'=' '{print$2}')"
readonly PATH_GCC_NAME="$(cat .build.cfg |grep ^'PATH_GCC_NAME=' |awk -F'=' '{print$2}')"
readonly PATH_GCC="$(cat .build.cfg |grep ^'PATH_GCC=' |awk -F'=' '{print$2}')"
readonly CROSS_COMPILE="$(cat .build.cfg |grep ^'CROSS_COMPILE=' |awk -F'=' '{print$2}')"
readonly ARCH="$(cat .build.cfg |grep ^'ARCH=' |awk -F'=' '{print$2}')"


#######################################
#TODO(mtulio) : Create main function, reading config file and running external functions to build (defined in .build_functions
